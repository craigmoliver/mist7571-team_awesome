<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Scaventure - the Adventure Awaits</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="assets/scaventure.min.css" />
    <link rel="stylesheet" href="assets/jquery.mobile.icons.min.css" />
    <link rel="stylesheet" href="assets/jquery.mobile.structure-1.4.2.min.css" />
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Seaweed+Script">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Abel">

    <script src="assets/jquery-1.11.1.min.js"></script>
    <script src="assets/jquery.mobile-1.4.2.min.js"></script>
    <script type="text/javascript">
    
    // function to read storage and init form
    function checkStorage() {
        // check if local storage available
        if (window.localStorage) {
            var key, value, field;
            // loop through local storage
            for (var i = 0; i < localStorage.length; i++) {
                // retrieve the key
                key = localStorage.key(i);
                
                // set the field from the key
                field = document.getElementById(key);
                
                // check for field and assign value
                if (field) {
                    // retrieve the value
                    value = unescape(localStorage.getItem(key));
                    // set the field value
                    field.value = value; 
                }
            } // end for loop
        } // end local storage check 
    } // end function
    
    // set the localStorage with the changed field
    function changeField(elKey, elValue) {
        // check if local storage available
        if (window.localStorage) {
            var key, value;
            
            // set key to form field id
            key = elKey;
            
            // set value to form field value
            value = elValue;
            
            // try to set item in local storage 
            try {
                localStorage.setItem(key, value); 
            }
            catch (err) {
                if (err.code == QUOTA_EXCEEDED_ERR) {
                    alert('localStorage ran out of memory.'); }
                }
            } else {
                alert('localStorage is not supported.');
            } 
        }
    // initialize our form from storage
    window.addEventListener('load',checkStorage,false);
    </script>

	<script>
 	$(document).ready(function(){
 		var json;
    	//load the json object into the local storage

	    $.getJSON("assets/profileJSON.json", function(result) {
			json = result;
			console.log("This is a name " + json.profile.username);

            $.each(json.profile, function(key, value) {
                $("#userStats").append($("li").attr("value",value.name).text(value.name));
                $("#userStats").trigger("change");
            });
	    });

        $("#userStats").bind("change", function(){
            var city = $("#userStats").val();
            changeField('username', username);

            console.log(json.profile.username);
        });
	});



    
    
  	//Load user info from local storage
  	//function loadUser
  	//if new user or first vist show profile set up
  	
  	//tell them to push user info into user local storage array
  	
  	//loop to display profile contents


    </script>
</head>
<body>

<div data-role="page">
    <!-- /header -->
    <div data-role="header">
        <a href="index.html" data-icon="home">Home</a>
        <h1>Scaventure</h1>
    </div>
    <br/>
    <div data-role="main" class="ui-content">
        <img src="assets/images/mustache.png" width="70" height="70" style="float: right; display: block;"></img>
    	<div data-role="content" data-inset="true">
                <h3>Welcome back,<div id="userName"></div></h3>
                <ul class="profileList" style="list-style-type: none;display:inline;" >
                <div id="userStats"></div>
                <li style="display:inline;width:25%;"><a href="#" class="ui-btn ui-icon-star ui-btn-icon-left"><div id=""> 5 </div></a>  Stars Found</li>
                
        		<li><div id=""></div>  Hunts Completed</li>
                
        		<li><div id=""></div>  Cities Scavenged</li>
                </ul>
                <br><br>
                 
        </div>
    </div><!-- /content -->

    <div data-role="footer">
        <h4>2014 Scaventure - MIST 7571 | Team Awesome</h4>
    </div><!-- /footer -->

</div><!-- /page -->

</body>
</html>